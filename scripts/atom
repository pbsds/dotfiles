#!/bin/bash
sudo bash -c ":" || exit 1

function install {
	if ! pacman -Qi $1 > /dev/null; then
		sudo pacman --noconfirm -S $1
	fi
}
function apmget {
	package=$1
	echo $package
	if [[ ! -d "$HOME/.atom/packages/$package" ]]; then
		apm install $package
	fi
}

if ! which atom >> /dev/null; then
	read -p "Please install atom first:  (y/N)?" DO
	if [ "$DO" = "y" ]; then
		install atom
		echo
		echo
		echo "Please launch atom once before continuing... (enter)"
		read;
	else
		exit 1
	fi
fi

if ! which apm >> /dev/null; then
	echo "CRITICAL: Atom package manager not found!"
	exit 1
fi

#apmget railscast-theme-ng # 404...
apmget railscast-theme
apmget atom-beautify
apmget atomic-rtags
apm disable markdown-preview
apm markdown-preview-plus
apmget graphviz-preview-plus

# syntax definitions
apm disable language-python
apmget MagicPython
apmget atom-jinja2
apmget autocomplete-cmake
apmget language-arduino
apmget language-armasm
apmget language-autoit
apmget language-batch
apmget language-bison-flex
apmget language-cmake
apmget language-diff
apmget language-dot
apmget language-glsl
apmget language-haskell
apmget language-ini
apmget language-latex
apmget language-lua
apmget language-scala
apmget language-velocity
apmget language-zonefile

# quality of life
apmget lines
apmget shell-it
apmget simple-align
apmget selection-highlight
apmget markdown-table-editor
apmget remote-atom


#linter stuff
apmget linter
apmget linter-ui-default
apmget busy-signal
apmget intentions
#apmget linter-clang
#apmget linter-python-pep8


# todo: ensure symlinked config files
